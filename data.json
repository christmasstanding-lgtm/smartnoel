[]
import json
from datetime import datetime
from collections import Counter

def generer_bilan():
    try:
        with open("data.json", "r", encoding="utf-8") as f:
            data = json.load(f)
    except FileNotFoundError:
        print("Aucune donnÃ©e trouvÃ©e.")
        return

    if not data:
        print("Aucune interaction enregistrÃ©e.")
        return

    total = len(data)
    pays_counter = Counter([entry["pays"] for entry in data])
    messages_counter = Counter([entry["message"].lower() for entry in data if "message" in entry])

    print("ğŸ„ Bilan annuel SmartNoÃ«l -", datetime.now().year)
    print("Nombre d'interactions :", total)
    print("Nombre de pays diffÃ©rents :", len(pays_counter))
    print("Pays les plus citÃ©s :", pays_counter.most_common(3))
    print("Messages les plus frÃ©quents :", messages_counter.most_common(3))
    print("DerniÃ¨re interaction :", data[-1]["date"] if "date" in data[-1] else "inconnu")

if __name__ == "__main__":
    generer_bilan()
